{"componentChunkName":"component---src-templates-blog-post-js","path":"/dom-issues/","result":{"data":{"markdownRemark":{"id":"372f1204-3234-5737-9bfa-a5d138af63fd","excerpt":"When you think about websites, think about trees. The Document Object Model is a tree your browser produces to represent the UI of a website. Every browser‚Ä¶","html":"<p>When you think about websites, think about <em>trees</em>.</p>\n<p>The <strong>Document Object Model</strong> is a tree your browser produces to represent the UI of a website.</p>\n<p>Every browser provides a JavaScript api for DOM operations. These are called <em>mutations</em>.</p>\n<blockquote>\n<p>DOM mutations are costly and occasionally inconsistent across browsers. Furthermore, its imperative api produces perplexed code, which is difficult to scale.</p>\n</blockquote>\n<p>That‚Äôs why there is a need for UI libraries like React, Angular and Vue.js. These modern JS technologies provide solutions to write declarative code that looks and behaves like plain HTML, by managing DOM mutations in the background.</p>\n<p>Dealing with the DOM has troubled me a lot in the beginning of my career. I hope this article will help you understand these complicated parts. You can also use it as a refresher before joining a technical interview.</p>\n<p>ü§µüèº‚Äç‚ôÇÔ∏è Challenge accepted? Ok, here we go‚Ä¶</p>\n<h2>DOM Basics</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1440px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c6f2f3e88c88b22d743d152291c7588/07a9c/cern-first-website.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.42105263157895%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzUlEQVQoz42S2RKCMAxFU4tA6wZUxeWB//9KTaa3mpER8nCmmbScJKVERK9VKsYzjtkzB+aEeH7+J+EVDrIBVIbis0RyL7ozI9MzF4XsXRHL6teE0tGoBBLfsI4oVGRnJliECYe1KKkCpWBLhg4LcrhmdpS76ZW0cznvrXdYhBvEkTkityxaEEonEbE8kY6+XXbqyZhHlsMBdzqx5OnyOmHsB8Y2d7hlGvWTZOTB5UItikXsmx52xEcNRq4hisjVwCQMuPyAnxEU6a/kwxvFPPWt71uqzAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cern first website\"\n        title=\"cern first website\"\n        src=\"/static/1c6f2f3e88c88b22d743d152291c7588/07a9c/cern-first-website.png\"\n        srcset=\"/static/1c6f2f3e88c88b22d743d152291c7588/466da/cern-first-website.png 475w,\n/static/1c6f2f3e88c88b22d743d152291c7588/906b5/cern-first-website.png 950w,\n/static/1c6f2f3e88c88b22d743d152291c7588/07a9c/cern-first-website.png 1440w\"\n        sizes=\"(max-width: 1440px) 100vw, 1440px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<em>The birth of the Web. This was the first website ever created. (Source: <a href=\"https://home.cern/science/computing/birth-web\">CERN</a>)</em></p>\n<blockquote>\n<p>The Document Object Model represents a web page, which is currently loaded in a browser window.</p>\n</blockquote>\n<p>In other words when you visit a website, your browser constructs a large JavaScript structure, which represents the contents of a website.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 973px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/599dc36a9ecad4950e12b811f4f42fa9/87a80/firefox-3d-dom-rendering.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.89473684210527%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAADaElEQVQoz5WSXUxbZRjHm0nCV5txoKMJa+tKKfT0AxCctN1k82NzrPsS145ASzuUjU0ijAt3AONWJ2o2o8G4hKkkG5viJHNKCUVhrUBP39JSmkwWndGYGG8U70w0urfv32PRK698kl+eN0/y/yXPm0fW6z+uCN+42k3ii4PLqZSQXIoJqdSyEI/HBVEUhZmZGSE4GRSCwaAQDkeEpaWEEBVjQjQqCslkQlhKJE4virEz09PTLQBkMqfTaYx8FvotTggW5hcxH1vG7dU7WFlJIRaLQQqCkHj2fevWHIi4iHQqgfTKMsKRLxCem0Pk8xmMj3+QlslkubItui38k83NP7ndbhxuPnyv+YiHtnq8tL3dSz0ej0Qb9fu89KjfR9ukWUdXDz3W9wpt63mDuv299JDL+4fL5caB/U5REhbIOI7jpVqzWCyQyFgtZmY2mZjZbGE8b2R6A88MVjuz1jWyesc+tn2vj+12P8e6+88zf2cf6zzZQ80NDlQZDEQS5v9H+He3Wq0wGivhqK9Gi+cETgbGMHb5JiYmprBy+0tk6O9Y/f4XXLwSlb4kSh07G6HXla8LFQoFr9Pp1vQVFdDr9RmDwQCNRoM9+10YGZ/F1dAqrs99jYnIt3jzwzSGr6dwbpSgdfAmLk+tYvidS7TcyON+jXZdWFBYyJeVbV5Tq9XQaDUZtVqLUpUSz/Q8j7ffF3Hi5Ql0nL0BT2ASHUOTOP7qFI4Ggug+P4vZ2Ffof+kM5UqUkPLrwry8PF6pVK6pVCpwRVyGK+bYQZ+ZLXS3smvHetkLQxdY/+A5Nvr6RZb85FOWmA2xdHye3f3mDosTkTW5j1CuqAibSkvXhTk5Oby8sPDn3NxcaDdr7j3i3EWnRwZoxPYwrWs4RLVNXbS+5jEaf8pGfzzVTn8Y6KN3n+2iH7ua6NhH16jVZv8zZ8MGyOXyWFaYn19g4oqVv3IlmzDy7iheC7yIocEBXBl+CwdafKh4og2ndj+K707vw0LnDoS9WxFqMuLCXjuePhtAldmKjUXFkNZeyQo3ciXl+ipLyFK7NenYuYtss9lJTe0DZIfzIGlofJxY6x4iDvt2YrNtI9XWWmKqNJIKcw3Rm6pJna2RmGsfjFXX29Lllab3sneYvW6ZrExCK6H5p/8f/s2oCuSK+/4C1iq6cWryTDgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"firefox 3d dom rendering\"\n        title=\"firefox 3d dom rendering\"\n        src=\"/static/599dc36a9ecad4950e12b811f4f42fa9/87a80/firefox-3d-dom-rendering.png\"\n        srcset=\"/static/599dc36a9ecad4950e12b811f4f42fa9/466da/firefox-3d-dom-rendering.png 475w,\n/static/599dc36a9ecad4950e12b811f4f42fa9/906b5/firefox-3d-dom-rendering.png 950w,\n/static/599dc36a9ecad4950e12b811f4f42fa9/87a80/firefox-3d-dom-rendering.png 973w\"\n        sizes=\"(max-width: 973px) 100vw, 973px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>The DOM has a form of a family tree, with <code class=\"language-text\">parent</code>, <code class=\"language-text\">children</code> and <code class=\"language-text\">sibling</code> nodes.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\">article\n<span class=\"token operator\">|</span>-- p\n<span class=\"token variable\"><span class=\"token variable\">`</span>-- ul\n    <span class=\"token operator\">|</span>-- li\n    <span class=\"token operator\">|</span>   <span class=\"token variable\">`</span></span>-- <span class=\"token string\">\"text\"</span>\n    `-- li</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>A node can be an HTML <code class=\"language-text\">element</code>, plain <code class=\"language-text\">text</code>, <code class=\"language-text\">attribute</code> and pretty much everything you will find in your markup.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1900px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/284eeebdf3ac59f5d80c973061a5ab03/742d3/devtools-inspect-element.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.26315789473684%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8UlEQVQoz4WSS4/TMBSF88PZ8j/4ASxYIiQWs2IxCAbxaJl22k7a2Hk4sZPm4Tyaw7FD0TAssHR0HcU5OffzDY7yhCRVEDJG03aQSYaH/RGHMML+cdEhFMvzc/Hdw+GIze4R99s9VusNgstlplGLlmbDMHr1XsOy7wcoVUDGCnmhUWjDanxVeYEsy5GpHHGcoDQlgmEc8b+l4gIpVZgWXT+iswNaO8L2E+wwYZhmjBdgnC4u4QXTNGFive5H/sTV6xpcSpEiPCSITkwjc0hZMmEDXTSwXccOe2pAcPf1G75Qt58+Y3W/wZr6vlp7mbL0hhP/nEUC4Z7cdimkIAJpyL1EJAyiKF8k2PLmYYfwFGG720Mb43k6OYbjuKScyVmJhAklhNDkqXGMNE20T1wZpnQIqOA5r3mefevX5fZ5rhFHCTmm/oISToL8vS+rDlVt0RNi3dQICq15azyUZv6mXXtX46thwdtt2saz7chL85uSOGzXQPy4QfrzPUx4578N0ixDQqXZMhZ1Xf9jmCUcCZpY6+C3OJ/PTNUAfY0Pb1/i9ZsX2N6+8ucDN9CRkBwF+1fbfwxZFQ3zNCHjGue65Xz2/vw0WOSbG8Srd9CHj3AzHSzD2/skT42eJlRKEbzxSFzLlmZVVaGl3Goay0EvffpfkdBG6lSRrYEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"devtools inspect element\"\n        title=\"devtools inspect element\"\n        src=\"/static/284eeebdf3ac59f5d80c973061a5ab03/a88f6/devtools-inspect-element.png\"\n        srcset=\"/static/284eeebdf3ac59f5d80c973061a5ab03/466da/devtools-inspect-element.png 475w,\n/static/284eeebdf3ac59f5d80c973061a5ab03/906b5/devtools-inspect-element.png 950w,\n/static/284eeebdf3ac59f5d80c973061a5ab03/a88f6/devtools-inspect-element.png 1900w,\n/static/284eeebdf3ac59f5d80c973061a5ab03/742d3/devtools-inspect-element.png 2550w\"\n        sizes=\"(max-width: 1900px) 100vw, 1900px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<em>You can navigate to the available options using the browser console. Give it a try on this website! Right click on some text and select Inspect Element.</em></p>\n<p>DOM is available <em>only</em> on web browsers. For example, in Node.js you will not even find the object <code class=\"language-text\">window</code>, the outer container of the DOM. That‚Äôs why testing environments mobilize libraries that simulate DOM.</p>\n<p>In addition to the DOM, the browser <code class=\"language-text\">window</code> object provides access to the following:</p>\n<ul>\n<li>CSSOM, which as you guessed it represents the CSS styles and stylesheets that are attached to a website.</li>\n<li>BOM, which hosts various helpful apis your browser provides, such us <code class=\"language-text\">navigator</code>, <code class=\"language-text\">location</code>, <code class=\"language-text\">history</code>, <code class=\"language-text\">XMLHttpRequest</code>, and the (in)famous <code class=\"language-text\">alert()</code> function.</li>\n</ul>\n<h3>What‚Äôs wrong with the api?</h3>\n<p>Ah that‚Äôs a good one, interacting with DOM elements can sometimes hurt your brain cells.</p>\n<p>Writing code that performs low-level DOM manipulations is like opening the Pandora‚Äôs box. Operations that are simple and repetitive, take a lot of code to be implemented.</p>\n<p>Your junior colleagues are starting hating you, your senior colleagues are starting yelling at you, your codebase is becoming more complex than your favorite Italian pasta, changes are taking more time than your promotion, debugging is as painful as the loneliness of Britney Spears, and the fact you can‚Äôt reason about your code makes you lose your sleep.</p>\n<p>Let‚Äôs see how we can interact with DOM elements.</p>\n<p>Consider the following HTML somewhere in <code class=\"language-text\">&lt;body&gt;</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nav</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>navigationList<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Home<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/contact<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Contact<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nav</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Now let‚Äôs assume we would like to add another list item in the middle because the user has logged in. Here‚Äôs a way of approaching this task by using the DOM api:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-jsx line-numbers\"><code class=\"language-jsx\"><span class=\"token comment\">// create a li element</span>\n<span class=\"token keyword\">const</span> li <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// create an anchor element and set its attributes</span>\n<span class=\"token keyword\">const</span> anchor <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span>\nanchor<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'target'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'_blank'</span><span class=\"token punctuation\">)</span>\nanchor<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/settings'</span><span class=\"token punctuation\">)</span>\nanchor<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span><span class=\"token string\">'User Settings'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// append the anchor to li</span>\nli<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>anchor<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// append the li to our list (DOM mutation)</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>lastElementChild<span class=\"token punctuation\">.</span><span class=\"token function\">prepend</span><span class=\"token punctuation\">(</span>li<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>You can run the example by yourself in <a href=\"https://codepen.io/nicotsou/pen/abpxQYW?editors=1111\">Codepen</a>.</p>\n<p>As you can see the api is imperative which makes the developer experience to suffer. It is difficult to read the code and to perform changes.</p>\n<p>But there is <em>another</em> major problem with the DOM.</p>\n<h3>What about cross-browser compatibility?</h3>\n<p>Ah yes, browsers used to have different DOM implementations and certain APIs are not available everywhere, especially the newest ones.</p>\n<p>The story goes back to the <a href=\"https://en.wikipedia.org/wiki/Browser_wars\">Browser wars</a>. For many years DOM was inadequate. The provided apis were not enough to support the complexity of our web applications. You see, it was never created to support applications in the first place. Web was about delivering content.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/64594667b4294bc8079578d8ff0e7208/29007/mosaic-first-browser.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.68421052631578%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACRElEQVQ4y22TW3OiQBCF+f8ve6+tZFNJJbrZUrkoMIAOw01A0OjuPzrb3SzRZH04NUMr35zp01jxJoGKFJIkgh8qRHGCeB1DxZFok2p5XusNrQmSzRpFVaKqt6RKVG4reQ6jEJbnrzC5v8P0/hbfbyb48fUJk8kjZouFQC6l01S00fpVXE+NwcKe48PHZ1iupzD9uYDrefCWHhzXoXUJx3GkZtPKclwXfhBAqQihUrKqaNgn5NwPfCycCNbd/TO+fHvA6c9v7F8OOBxfsD8e0O37/7Tru0H7s7r9UOPf+0MH62k6w8PjL+lNoELpWxTHaLvdGXAhrje79qrqtoE1BKDg0nVXZNtduvQcQBvu25oOiklDGBxKXhZXoWPNipKY0g0ExvJWPmxXE5hBhiApgQ3SzNAhqaS560fgjkDvgAxjdzY13fEczO2QEq5IDTW5wcxuEMY8GiVMvoPOWhqlBvUF7A2Q+za6m9sOln5ELlqZNVZetqQGWVHDFA05bWXPThky6ALIPeSBZG2bhlx08lJelvRiTm5qrMmRNgzjtaX/DI6vhhIoTT2MKWGfrqYl5TAKJAAGFlVGoFpAw3X5sIrqhfQ1zTLqMR9WSGAEjOmagYyMydlVISD+UT6ruiE3NWlLkEG8ZzdnZ2eXljZa0mMxxOSZAPl0kxu6bi2nZ0X2r5ZJfeyhBMLiA5oaltjOs9exGOds1JBg+6Y21sVlOyRen06oj0dYW6JeDur7L6Tr+6tfDNc73h/26Cmgl5tPONx+xl85kcRnyx+ofgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mosaic first browser\"\n        title=\"mosaic first browser\"\n        src=\"/static/64594667b4294bc8079578d8ff0e7208/29007/mosaic-first-browser.png\"\n        srcset=\"/static/64594667b4294bc8079578d8ff0e7208/466da/mosaic-first-browser.png 475w,\n/static/64594667b4294bc8079578d8ff0e7208/906b5/mosaic-first-browser.png 950w,\n/static/64594667b4294bc8079578d8ff0e7208/29007/mosaic-first-browser.png 1600w\"\n        sizes=\"(max-width: 1600px) 100vw, 1600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<em>Mosaic was one of the first web browsers. The <a href=\"http://www.evolutionoftheweb.com/\">Evolution of the Web</a> is a great website to learn about web history.</em></p>\n<p>Many big corporations tried to force their own solutions to make the web interactive, which led to a tremendous confusion for web developers. You see, every api was different. Developing an app for Mozilla would not work for Internet Explorer.</p>\n<p>The <a href=\"https://www.w3.org/\">W3C</a> organization was founded in 1994 to standardize browser behaviors and language features. I have to mention here that Microsoft was not willing to support this alliance for years, making <a href=\"https://en.wikipedia.org/wiki/Internet_Explorer\">Internet Explorer</a> the most hated software, after <a href=\"https://en.wikipedia.org/wiki/Java_applet\">Java applets</a> of course.</p>\n<p>Although things are getting better nowadays, there are still a few traps. Quite often certain apis become deprecated in favor of newer ones. There are also cases where companies refuse to implement apis, because it gets in their monopoly plans.</p>\n<p>Chrome is a good example. Developers have access to a superset of web apis that are not available elsewhere, creating a new wave of Chrome developers. On the other side companies which are more desktop-centric like Apple, detain from supporting those features at first place. They influence developers to write native apps for their platform, using the language and tools provided by them.</p>\n<p>But how can you be sure if you are supposed to use an api or not?</p>\n<p>To avoid unexpected surprises, you should <em>always</em> consult online references like <a href=\"https://developer.mozilla.org/en-US/\">MDN</a>, or <a href=\"https://caniuse.com/\">caniuse</a>. In this way you can quickly distinguish any incompatibilities.</p>\n<p>In most of the cases there is a way to use modern browser features using a <a href=\"https://en.wikipedia.org/wiki/Polyfill_(programming)\">Polyfill</a>. These js scripts provide an identical api, making it easier to switch to native.</p>\n<p>Using <a href=\"https://en.wikipedia.org/wiki/Feature_detection_(web_development)\">feature detection</a> techniques you can distinguish whether or not to load these extra scripts.</p>\n<p>But wait, there is <em>another</em> problem with the DOM.</p>\n<h3>What about performance?</h3>\n<p>Ah I almost forgot, DOM operations can be really slow.</p>\n<p>I‚Äôm pretty sure you ran into websites with sluggy animations that destroyed the smoothness of your user experience. Compare a gif animation to a Netflix series and you‚Äôll get what I‚Äôm trying to explain here.</p>\n<!-- prettier-ignore-start -->\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 733px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0a2d79bd7a75a5515c4fb480567f5a52/00b70/the-horse-in-motion-animation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.47368421052632%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC1klEQVQ4yzWTR0tzURCGz58TJOBGFwZ0JbgQXCgSIgHRhQqixIbECGIvqCiCDWNPFBN7i733rqjr9+MZ+BaXe+7kzMw7z7xxx8fHur+/18bGhubm5nRwcKDn52f9/v7q5uZGKysrSiaTent709/fn91dXl62e+/v7/r+/tbDw4NisZiOjo7kKOL3++X1epWbm6vp6WltbW2poqJC6enpysrKUm9vrxUIBoPKyMhQdna2Ojo6LBYKhZSTk2P5LS0tcpeXl5ZQXV2taDRqXe/u7jQ4OKhAIKCBgQFTjNrZ2VkVFBQoHA7b9/n5uSKRiPLy8lRaWqrDw0M5gicnJyb35eXF3vv7+zYahT8/P+2NGt5XV1e6vb3VxcWFjbm2tqbt7W3LoZZ7enoyBSRMTk5qdXXVisAQvv39/VpcXDTlHx8fhoPRxsfHjR25COrp6dHExITc9fW1mpubVVhYqMrKSs3MzOjx8VG1tbVKS0tTamqq8SKxpKREKSkp8ng8amxsNKU1NTXGHoZVVVVyqKFIZ2enbRkOX19fdh4dHdXCwoKN8vr6quHhYXvi8bgSiYQhGBkZ0dLSkjlhfX1dDiY8m5ubOj09NfkUpTtnlkYcTizi7OxMe3t7VgBMsCbON/cdS6Bje3u7ysvLNTQ0ZMWIwQ9LYQ38RiOUNzU1qa+vzzDAFJ51dXV237GpzMxM+Xw+Y4TBUZCfn6/i4mLzGE1Q1tDQYF4sKyvT/Py8bRruWKaoqMhGd/yAl+jGVhkPPjs7O/r5+bEklHGZacDDbyBgCmLcgTNMHZc5oAxPYRsuYQkYkUwjCrEYzsBnVLiBB4YIsYJ84J/W1lbj1dbWZuOhvKury8aBL5sH+tTUlP2r/jOk4djYmOrr6y3mdnd3rRi+Aj4dUUgicRpgfh7s1d3dbdZBCDGKwRG2qHTMjzWQT3EQoBD5FCbGmJyJ880DHpaHat7Yjjv/AEt5zSH1vFKqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"the horse in motion animation\"\n        title=\"the horse in motion animation\"\n        src=\"/static/0a2d79bd7a75a5515c4fb480567f5a52/00b70/the-horse-in-motion-animation.png\"\n        srcset=\"/static/0a2d79bd7a75a5515c4fb480567f5a52/466da/the-horse-in-motion-animation.png 475w,\n/static/0a2d79bd7a75a5515c4fb480567f5a52/00b70/the-horse-in-motion-animation.png 733w\"\n        sizes=\"(max-width: 733px) 100vw, 733px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<em><a href=\"https://en.wikipedia.org/wiki/The_Horse_in_Motion\">The Horse In Motion</a> was the first move ever created and here you can see all of its frames.</em></p>\n<!-- prettier-ignore-end -->\n<p>An animation is performant enough when it reaches at least <a href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/Animation_performance_and_frame_rate\">60 frames per second</a>. That‚Äôs because a common monitor has usually a refresh rate of 60Hz<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup>.</p>\n<p>But how can we reach those 60fps? To answer this question we will have to understand how browsers are rendering a website. How they translate an HTML script to actual pixels on your monitor.</p>\n<p>Here‚Äôs where the interesting part begins.</p>\n<p>To render a <em>single frame</em>, your browser follows the steps below:</p>\n<ol>\n<li>üëì Parsing: Everything starts with a <code class=\"language-text\">GET</code> request to the server. The server responds back, by sending the HTML, which is then being parsed to produce the DOM and CSSOM trees.</li>\n<li>üßÆ Style Recalculation: By combining those two trees, your browser produces the <code class=\"language-text\">Rendering Tree</code>. This is quite similar to the DOM, but it includes <em>only</em> what it will be rendered on screen, at this specific frame.</li>\n<li>üìê Reflow: It then builds the <code class=\"language-text\">Layout</code>, by converting those elements in box containers and calculating how much space they take on screen. Elements can affect others, for example the width of the <code class=\"language-text\">body</code> element often affects the width of its children, and so on.</li>\n<li>üñå Paint: Then for any of these boxes, it renders vectors and then it rasterizes them to create a pixel-friendly view.</li>\n<li>üèû If there are images, they need to be decoded according to their format and then resized.</li>\n<li>üéº Composition: Sometimes a website has different layers that are simultaneously evaluated (For example you may have a fixed <code class=\"language-text\">&lt;div&gt;</code> element). To optimize the performance, these layers are being transferred to the GPU.</li>\n</ol>\n<p>Now, as we change the DOM (for example hiding an element, or setting a new background image), the browser follows most of the steps above, for every single frame. And sometimes it drops frames to ensure the app will remain responsive.</p>\n<p>Modern browsers include Profiling tools to help you identify performance related issues.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1900px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b190ce2199e739e9be97ef7604352739/de55f/devtools-profiling.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.10526315789474%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAADI0lEQVQ4y52Q30/bVhTHrU3qVqBDmgZpF2LHjh1iE8xKINBREsdJCIQfKyg3UXESAl3XhU547aBAWBI6LDK1m6apD+2eNu25D33otIf9ZbV6/d0NdA9TX6Y9fHS+93vOPefew+3d/UJttRud9rFz0mx/d9JqP3QajYbTarUdxzl12ux8eHjk7O4+cA5YPPq26Rwd/YuTBqPZOu4cHDRULmOmLNM0sbAwj5XlPPL5BZimASNlwkxnkEwaSBopJJLnXuoNXa+L8U9kHtMWt7m5Wfj8dh2Oc/zqyU8n7uNHHde2bbdcqbgbG1V3a2vLrVQst1qtuMVi0SWk6BYKxK2ULeaXXcuyurxaX1/H6upqgcvNZUkmt4ixT2JUVTUvHB5GLpfFZHwamqZjdtbARGyMvTCFdNrEYn4ey0t5xONx6LqOsKJ4mjpMNTXC6jXCXfJPEFmfxcKNm/Qr+55Xu1VH8WYZD/a/RLO5g/t72/ja3sb+no3JxBL8qgFJT8O2b2HHvoPPiOV9JE5TX2gKQXmEcO/zaTIQvQHlGqGF201vNl/H3OoOkqW7ePbHX3j0/CVqhz/g6cs/EUlaeOeKAc6XxJ7Twf7pKWr2N95FYY5ekjIYCumE6+ENMqAtYmBkiQqTxOsT0giOF/Hu5Rnc6TzDzs+/4XrRRuv3F9BSZfQGEugRTERmiojPb2KutO1dDBi0X0rhiqASrlfMkQ+UPPrDeerT19i0DPqkeVwYMlHafYz6978iPL2Gez/+Aj3LGvJJ9Ig59Eo59MuL8EXXvPf4LO0TM7gssB1+ODRKBsUYBO065dUZ72NlCn5lGj5pgu1sBbmVDQwGx5FYLkGN5zAoTrL8FM7rGOGp7h3qV+Jsh6yhpoaJkfgUelSlsatj3tjoiKeERG9YCXlSkPcE3n+mg3zAkyWBackLywzlDfIZlNVAVSOE29iqk4fN+8gmr76eiF+jsViMiqJIQyGZyrJCZUU5190oy2f6bUKvWQ6RCGuojeildCqB0aiG8ViMTdHQTSqKAvm/Iitn9axhieN59qlAsBZRo1VNi1Z5Qfy/1IYCAv83GY+e7lRI930AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"devtools profiling\"\n        title=\"devtools profiling\"\n        src=\"/static/b190ce2199e739e9be97ef7604352739/a88f6/devtools-profiling.png\"\n        srcset=\"/static/b190ce2199e739e9be97ef7604352739/466da/devtools-profiling.png 475w,\n/static/b190ce2199e739e9be97ef7604352739/906b5/devtools-profiling.png 950w,\n/static/b190ce2199e739e9be97ef7604352739/a88f6/devtools-profiling.png 1900w,\n/static/b190ce2199e739e9be97ef7604352739/7e23a/devtools-profiling.png 2850w,\n/static/b190ce2199e739e9be97ef7604352739/de55f/devtools-profiling.png 3080w\"\n        sizes=\"(max-width: 1900px) 100vw, 1900px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<em>To understand the performance of your application and how it‚Äôs affected by your changes, you can use the profiling tools.</em></p>\n<p>Keeping a web application responsive at any given moment, and especially performing a fast initial load, is critical for reaching an acceptable user experience.</p>\n<p>Ok that was it. Now you know why technologies like React exist. Now let‚Äôs see how Virtual DOM fixes those issues.</p>\n<h2>And the fun starts</h2>\n<p>Well, now you know.</p>\n<p>That‚Äôs why there is a need for UI libraries like React, Angular and Vue.js. These modern JS technologies provide solutions to write declarative code that looks and behaves like plain HTML, by managing DOM mutations in the background.</p>\n<p>For example, React utilizes plain <code class=\"language-text\">render()</code> functions that describe how the UI looks like, at any given <em>state</em>. When the state changes, the function will be revoked and its associated UI will be re-rendered.</p>\n<p>To automate this process, React keeps a clone of the DOM in memory. They call it <strong>Virtual DOM</strong>. It‚Äôs way smaller than the actual DOM.</p>\n<p>React performs DOM mutations in memory, as an intermediate step. Then, it frequently updates the real DOM <em>only</em> in the parts that have actually changed.</p>\n<p>To ensure this is performant enough (60fps), a pretty sophisticated ‚Äúdiffing‚Äù algorithm is used. The DOM updates are also being batched, to avoid expensive page <em>repaints</em>, which are forcing the browser to re-evaluate the styles of the page for every single frame.</p>\n<p>Virtual DOM makes React extremely performant, while providing an incredible developer experience.</p>\n<p>This is not a React exclusive feature. <a href=\"https://vuejs.org/v2/guide/reactivity.html\">Vue.js</a> and <a href=\"https://emberjs.com/\">Ember.js</a> have their own implementations.</p>\n<p>Angular on the other side introduced a concept called <a href=\"http://google.github.io/incremental-dom/#:~:text=Incremental%20DOM%20is%20a%20library,HTMLElement%20s%20and%20Text%20nodes.\">Incremental DOM.</a> Compared to Virtual DOM, it has a low memory footprint and it is <a href=\"https://en.wikipedia.org/wiki/Tree_shaking\">tree-shakeable</a>. This makes it ideal for mobile application development. Although it‚Äôs considered slower, it can outperform the Virtual DOM at certain cases.</p>\n<h2>That‚Äôs all folks</h2>\n<p>We reviewed how DOM works under the hood and we explained why mutations are making a web application slow. Then we discovered how React handles DOM mutations with Virtual DOM.</p>\n<p>As a JavaScript developer who cares about your craft, you should be familiar with those topics. Learn the DOM api. Stop using your favorite framework or library for a while and focus to build an app with plain vanilla JS. This experiment will make you more confident using those tools.</p>\n<p>üèÖ Achievement unlocked.</p>\n<p>Cover Credit: <a href=\"https://unsplash.com/photos/567UmWZIYJ8\">@matthew<em>t</em>rader</a></p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">\n<p>In Europe the common refresh rate is 50Hz. There are devices in the market nowadays (like the iPad Pro) which have 120Hz or even more.</p>\n<a href=\"#fnref-1\" class=\"footnote-backref\">‚Ü©</a>\n</li>\n</ol>\n</div>","frontmatter":{"title":"Why People Are Afraid Of The DOM?","date":"April 28, 2021","description":"The Document Object Model is a tree your browser produces to represent the UI of a website.","cover":{"publicURL":"/static/fcfb4e455a896402e9810f9209987c15/cover.jpg","childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='267'%20viewBox='0%200%20400%20267'%20preserveAspectRatio='none'%3e%3cpath%20d='M0%2038l1%2038%202-2%205-2%206-3c4-5%208-7%209-6l-1-1%201-1c2%201%206-2%206-3l2-2%202-1c0-3%206-5%207-4h3l2-3%202-3%201%202h1l1-1c-2-1%204-4%209-3h5v-8h5c3%201%205%201%206-1l4-2%202-1c0-3%206-5%207-4h4l2-1c0-2%202-2%206-2%205%200%205%200%208-4%202-4%204-5%204-3l4%201c3%200%204%200%204-2s3-5%204-3c0%202%2012%201%2012%200%200-2%201-2%204-2%204%200%204%200%204-4V3h16c36-2%2012-3-72-3H0v38M288%201l8%201c7%200%208%200%2011%203%202%203%204%203%208%203l5%201c0%202%206%207%207%207l6%204c4%204%207%205%207%203s5-1%206%202l4%204c2%201%202%201%202-1%200-3%203-1%204%203%202%204%204%205%204%203s2-2%202%200l5%203c2%201%203%203%202%203-2%200-1%202%200%202l4%203%203%202c1-1%201%200%202%202l5%204%203%203%203%204%206%205%204%203%201-34V0h-56l-56%201m-57%2067c-2%200-2%201-3%206%200%206-1%207-3%204l-1-2-3-2c-3-4-5-4-6-1%200%203-1%203-4%200-4-3-4-4-6-1-1%201-1%201%201%203l8%2013-17-2c-7-1-11-1-10%201l2%201%2010%204c7%203%207%203%205%204-2%200-2%201-1%201%202%202%201%203-1%202l-8%203-4%202c-6%202-7%203-1%203%204-1%205%200%202%203l-2%201%202%201c2%201%202%201-2%204-5%203-9%207-7%209l2-1h1l-1%203-1%202h1l2-1-2%204c-4%205-3%206%201%203l5-3%201-1%209-4%201-2c-1-2%200-5%201-4v1l1%204h1l2-1v2l-5%205c-1%200-6%206-6%2010v2l2-2%203-4c3-2%204-3%204-1%200%203%203%201%204-3%202-4%202-4%205-3l4-1c1-1%201%200%201%202%201%202%201%204-2%207-2%203-3%206-3%2010%200%207%201%208%202%203s4-11%205-11l1-2c0-2%205%208%205%2011%200%202%200%202%201%201%202-1%204%208%205%2024a663%20663%200%20008%2066l1%2018v8h12v-9l-2-19-2-36c0-8-2-25-5-36l-3-22%203%205%203%204-2-15c-1-3%202-2%203%202l7%2010v-3c-1-3-1-3%201-1l5%209%204%207c0-5-4-19-6-24l-3-7c1-2%2010%208%2013%2014%204%207%205%206%203-1-1-4-8-14-11-17l-6-4c-6-3-5-4%201-2%203%202%207%205%2012%2012l2%203-1-3-3-7-3-4c0-2%2010%203%2014%207%205%203%206%204%206%202l-1-2-3-4c-2-3-12-9-16-10-2-1-2-1%200-1l6%202c4%202%205%203%204%201l2-1%203%201%203%202%205%203-3-4-2-4-14-8c-3-2-3-2-1-2s2%200%201-3v-3c1%200%202%202%202%205l3%203c3%202%204%201%201-2-2-2-2-2%200-2l-1-2c-3-1-2-2%202-1l1-1c1-1-4-3-7-3h-1l-3-1c-6-2-6-2%202-4%204%200%202-2-2-1h-3l2-2%206-3c3-1%204-4%201-3l-4%202h-5l-5%201h-2c-2%202-3%201-2-1l8-8v-2c-1-1-14%204-15%207h-2l-3%201-1%202%202-9%201-4c1-4-2-4-5%200l-2%204-1-4c0-3-1-3-3-3'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.498422712933754,"src":"/static/fcfb4e455a896402e9810f9209987c15/7e3e6/cover.jpg","srcSet":"/static/fcfb4e455a896402e9810f9209987c15/23edd/cover.jpg 475w,\n/static/fcfb4e455a896402e9810f9209987c15/67316/cover.jpg 950w,\n/static/fcfb4e455a896402e9810f9209987c15/7e3e6/cover.jpg 1900w,\n/static/fcfb4e455a896402e9810f9209987c15/4daf6/cover.jpg 2850w,\n/static/fcfb4e455a896402e9810f9209987c15/ac719/cover.jpg 3800w,\n/static/fcfb4e455a896402e9810f9209987c15/93dd1/cover.jpg 6240w","sizes":"(max-width: 1900px) 100vw, 1900px"}}}}},"previous":{"fields":{"slug":"/2021-04-20-music-for-creative-minds/"},"frontmatter":{"title":"Music For Creative Minds"}},"next":null},"pageContext":{"id":"372f1204-3234-5737-9bfa-a5d138af63fd","previousPostId":"7b54a3f8-625d-513b-8d71-ee93a850c1f6","nextPostId":null}},"staticQueryHashes":["2158823057","2569554932","3275011449"]}